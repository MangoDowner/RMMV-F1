# 事件
## 什么是事件？
在PRG游戏里，游戏进程中贯穿着很多要素，比如文字会话，从宝箱中获取到物品，和boss战斗等等。
用RPG maker你将用名为“事件”的概念来组织这些数据。

事件是用来执行某些种类游戏进程的机制。
例如，当玩家尝试和NPC谈话的时候，你可以使用事件相应来指派显示在屏幕上的图片和句子。 

依赖于玩家的行动和游戏状态，不同的事件触发将会导致游戏中不同的结果产生。

## 事件类型
事件有如下的三种类型。那些关系到故事和游戏推进的部分都由“地图事件”产生。
+ 地图事件（Map Events）
地图事件是运行在地图场景上的事件。使用这个类型的事件可以设置角色会话，可以获得物品的宝箱。
另外，你也可以声明游戏结构和推进相关的事件，这些事件不需要在显示图片，比如改变玩家位置，切换场景。 

你可以通过点击主窗口的“事件（Events）"按钮进入事件编辑模式，点击[模式(Mode)]->[事件(Events)]也可以达到同样的效果，
这样你就可以创建和编辑地图事件了。

+ 战斗事件（Battle Events）
这类事件出现在战斗场景当中。
例如，“当敌人HP低于某个设定值的时候就变形”就会使用战斗事件。 这些事件的创建和编辑在数据库的[（敌群）Troops]()页面当中。

+ 通用事件（Common events）
这些事件可以在任何时候使用。
使用这些事件来调用地图事件和战斗事件，或者设定在使用特殊物品的时候产生这些事件。
可以在 上数据库中的[（通用事件）Common Events]()分页创建和编辑这些事件。

## 地图事件系统
### 地图事件处理流程
+ 事件表示（Expressing Events）
游戏中地图事件详情的声明遵循以下流程：
在哪里（位置），何种情况（表现出来的情况）， 被何种行动触发, 将会发生什么（事件执行内容）。 

比如角色对话和有物品的箱子这种类型的事件，表现为指派到地图事件的图像，
而地图事件声明了“将会发生什么”。另外，像出入建筑，场景切换之类的过程，可以用没有图像的事件来实现。 

创建事件的时候，你首先需要在主窗口的地图上面决定“在哪里 和 发生什么”。然后，你就可以定义剩余的内容，比如“什么情况下发生”。

+ 事件页面的“条件”（Event Pages with "Conditional" Contents）
地图事件中，你可以根据当前游戏状态来决定发生什么事情。 

[Event Pages]（事件页）就负责这一块。事件页[conditionally]（条件）决定了发生的事件内容。
你可以设定一个事件页**多达20页**的事件，同时指定不同的图像，触发条件，并为每一个事件页指定一个事件内容。 
换句话说，你可以在一个地图事件中[根据条件]有20种不同选择。

+ 用条件限制事件页
决定“何种情况” 使用哪个特定的事件页的参数是 [条件] (Conditions)。
“条件” 基于[开关] (Switches)和[变量] (Variables)或者"玩家是否拥有某个特定的物品"而设定。 

游戏流程中地图事件的发生基于事件页中设定的条件是否被满足。
当有许多事件页满足设定的[条件]时，地图中拥有最高数字的事件页将会被触发。反之，将不会发生任何事件。

### 计量游戏状态
+ 使用开关来计量游戏状态
事件页中的[条件] (Conditions)当中，[Switches]（开关）和 [Variables]（变量）是用来设定条件的主要手段。 

开关能记录[ON]和[OFF]的值。这个用来计量一些二值化的游戏状态

> 例如“玩家是否已经接受了国王的任务”，“玩家是否打败了boss”。 

游戏开始时，所有的开关都被设置为[OFF]。
最重要的是，当触发了一个事件的时候，你可以将相应的[开关]值在事件页“内容”（事件产生的结果）里设置为[ON]。 

通过在别的事件页的[条件]里读取之前设定的[开关]状态，
你可以用一个开关值来控制其他所有地图事件的内容。
整个游戏剧情发展都可以通过持续改变开关状态来控制事件触发来构建。

+ 用变量来追踪数值
[变量]可以用来存储任意值（整数）。游戏开始时候数值被自动设为0，
你可以根据游戏状态来给变量赋值或者与其他值做加法（通过[Control Variables](控制变量)事件命令）。 

通过使用变量，你可以精细控制地图事件的出现条件和结果，比如，根据玩家的剩余HP、金钱或其他数值来改变事件的内容。

+ 管理开关变量
在一个游戏里，你最多可以使用共``5000``个开关/变量。
开关或者变量的数量多少和如何使用都取决于你。
使用合理的命名帮你理解这个开关/变量的用途以及两者的区别。你可以在他们各自的选择窗口设置他们的名字。

+ 在自主事件中使用“独立开关”
地图事件还支持独立开关。独立开关只能在某事件的内部使用，每个事件最多``四个``（A到D）。 

当一个事件的进程控制仅由它自己完成的时候，可以使用独立开关。
> 例如：一个含有宝物的宝箱就可以使用独立开关来判断是否已被开启过。
> 设置两个事件页（未被开启和已被开启），在第一个事件页（未被开启）页的最后打开独立开关，
使之成为第二个事件页出现的条件，这样只有在宝箱未被开启（第一次触发）的时候才能得到宝物。

## 地图事件创建和控制
### 地图事件创建和控制
+ 切换到编辑模式
为了创建和编辑地图事件，首先通过点击主窗口工具栏中的[事件] (Events)按钮切换到事件编辑模式
（菜单栏中使用[Mode]（模式） -> [Events]（事件）也可以切换）

+ 创建一个新的地图事件
要创建新地图事件，先在地图上双击你需要放置事件的地方。
然后在弹出的[Event Editor] (事件编辑器)中编辑你的设定，按下[OK]按钮确定。
要获得更多关于设置参数的帮助，请查看[地图事件设置]().

+ 再编辑和移动
当你放置一个地图事件的时候，一个图标将会在你事件的位置显示（你第一个事件页选择的图像会默认被使用）。
双击这个图像，会再次打开[Event Editor]（事件编辑器）窗口，这里你可以再次编辑事件设置。
此时，你也可以通过拖动图标来移动你的事件位置。

+ 通过上下文菜单控制
当你在事件编辑模式右击地图的时候，你可以复制或者删除已经放置的事件。上下文菜单有如下功能。

    + Edit（编辑） (当图块没有事件的时候，这里是“New”，新建事件)
    打开事件编辑器窗口
    + Cut （剪切）
    复制当前事件到剪贴板并删除当前事件
    + Copy （复制）
    复制你右击的地图事件
    + Paste （粘贴）
    粘贴剪贴板的地图时间到你右击的位置
    + Delete （删除）
    删除你右击的地图事件
    + Quick Event Creation （快速创建事件）
    使用默认配置创建四个类型的事件（稍后会提到）
    + Set Starting Position（设置初始点）
    设定玩家和交通工具的起始点。起始点将会被蓝色框标识。 
    > 事件图标使用白色框

### 快速事件创建
通过使用上下文菜单中的[Quick Event Creation] (快速事件创建)，
你可以创建四种传统RPG中常用的事件类型（使用默认设置）：
+ [Transfer]（场所移动）
+ [Door] (门)
+ [Treasure]（宝物）
+ [Inn]（旅馆） 

就像其他事件一样，使用“快速事件创建”创建的事件一样可以编辑，复制其的参数和进行其他可以对标准事件进行的操作。

+ Transfer（场所移动）
在地图上的指定位置创建一个不可见的事件，将玩家传送到指定位置。
> 请在楼梯或者入口这种地方使用这个事件。
在[Location] (位置)和[Direction]（方向）参数中指定玩家被传送的目的地和玩家的朝向。

+ Door（门）
创建包含一张图像的事件，它会将玩家传送到指定位置。
使用[Image]（图像）字段指定显示的图像，用[Location]（位置）字段指定玩家被传送到的位置。

+ Treasure（宝物）
创建一个可以在玩家第一次打开时从宝箱获得物品的事件。
使用[Image]（图像）字段指定显示的图像，通过[Content]（执行内容）字段指定玩家能获得什么样的物品（金币/物品/武器/防具）

+ Inn（旅馆）
创建一个可以让你的队伍完成回复的事件，使用[Image]（图像）字段指定显示的图像， 使用[Price]（价格）字段指定回复的价格。

## 地图事件设置
### 通用设置和事件页（Event Pages）设置
![](../inc/img/01_09_03_img01.png)
+ ID (标题栏显示)
每个事件都有自己的唯一ID，ID会在事件创建时根据这张地图内创建顺序被自动分配。
事件ID被用于如指定事件使用特定变量的情况。
+ Name （名字）
地图事件的名字，这个属性仅被用在编辑器（不会影响游戏）。
ID将会被自动输入作为初始名字。必要时可以改动名字以提高可读性。
+ Note （备注）
给自己看的备注
+ Event Page ID（事件页ID）
包含在这个事件当中的事件页ID。通过点击选项卡，你可以切换到你想要编辑的事件页。
+ Event Page Control Buttons（事件页控制按钮）
窗口顶部的按钮可以进行创建，删除事件页等操作。每个按钮的功能罗列如下。

    + New Event Page（新建事件页）
    在当前正在编辑的事件页后创建一个新的事件页。每个额外事件页创建时将会有一个数字自增ID。
    + Copy Event Page（复制事件页）
    复制当前事件页的内容到剪贴板。
    + Paste Event Page （粘贴事件页）
    从剪贴板复制的内容中添加（插入）一个事件页到当前编辑的事件页之后。事件页创建时将会获得一个自增ID。
    + Delete Event Page （删除事件页）
    删除当前编辑的事件页。在这个事件页之后的事件页ID将会被减1。
    + Clear Event Page （清空事件页）
    清空当前正在编辑的事件页内容（重置为初始状态）。

### 事件页设置
![](../inc/img/01_09_03_img02.png)
#### Conditions（触发条件）
这个事件页的内容触发的条件。
触发条件可以在[Switch]（开关）, [Variable]（变量）, [Self Switch]（独立开关）, [Item]（物品） and [Actor]（角色）。
设定特定的条件以满足你的需求。

如果你希望事件无条件触发，那么不要设置任何条件。如果你设置多了多个条件，那么事件仅会在所有条件都满足的情况下事件才会被触发。

如果有多个事件页的条件被同时满足了，那么拥有最大ID的事件页内容将会被触发。反之，如果没有事件页的条件被满足则不会有任何事件页被触发。

+ Switch（开关）
如果开关被设置为ON则此类型事件将会被触发
+ Variable （变量）
指定变量大于给定值的时候事件将会被触发。
+ Self Switch （独立开关）
指定独立开关变成ON状态时被触发。
+ Item （物品）
一个队伍拥有指定物品的时候事件将被触发。
+ Actor （角色）
指定角色在队伍中时事件将被触发。

#### Image （图像）
当事件出现在地图上的时候图像会被显示。
要指定图像，双击事件框中心并在弹出的[Select an Image](选择文件)窗口中点击文件列表（左边）和图像（右边）并选中。

如果你没设置图像，则事件图像将不可见。
在选择图像的窗口中选择位于文件列表顶部的[(None)]可以删除已经设置的图像。

#### Autonomous Movement （自动移动）
用[Type]（类型）、[Speed]（速度）和[Frequency](频率) 来指定地图事件的移动方式。
[速度]定义了移动的速度，数值越大移动越快。
[频率]定义了移动的周期，数值越大周期越短。
[Type](类型)让你指定下面四种移动方式之一。

+ Fixed(固定)
地图事件将不会移动
+ Random （随机）
地图事件将会随机四处移动
+ Approach （接近）
地图事件将会自动接近玩家
+ Custom （自定义）
沿一条特定的路线移动。单击[移动路线]的时候可以指定路线。更多信息请参见 [设置移动路线].

#### Options
可选的图像的显示方式。需要的话就选中特定的选项。

+ Walking（步行动画）
移动的时候播放步行动画。当事件是角色或动物等的时候使用。
+ Stepping（踏步动画）
不动的时候播放踏步动画。当事件是波浪或火焰等的时候使用。
+ Direction Fix （固定朝向）
禁止改变图像的朝向，即使是在移动的时候。
+ Through（允许穿透）
允许它穿过一些无法通行的地形或事件。
#### 优先级
在下面的选项中指定一个以确定事件和玩家的高低位置关系。如果事件和玩家可以重叠，那么位置在上方的图像优先显示。

+ Below characters（人物下方）
玩家和其他角色可以从该事件上方通过。
然而，如果在[Image]（图像）中选择了一个图块作为图像，那么玩家能否通行会根据这个图块的通行度来决定。
+ Same as characters（与人物同层）
将事件和玩家置于同层，禁止玩家走到该事件的位置。
+ Above characters（人物上方）
玩家和其他角色可以从该事件下方通过。
#### 触发条件
对于已经出现在地图上了的事件，在下面的选项中指定一个以确定什么时候执行事件的[Contents]（执行内容）。

+ Action Button(按确定键)
当玩家面对事件（如果允许重叠就是和玩家重叠）按下确定键的时候执行。
+ Player Touch(玩家接触)
玩家碰触到事件（如果允许重叠就是经过事件）的时候执行。这种情况下按确定键也会执行。
+ Event Touch（事件接触）
当一个[Autonomous Movement] (自主移动)的事件碰到了玩家（如果允许重叠就是经过玩家），以及[玩家接触]的时候执行。
+ Autorun（自动执行）
当事件满足出现条件，出现在地图上后立刻执行。
+ 并行处理
当事件满足出现条件，出现在地图上后立刻执行（**周期性地循环处理执行内容**）。
#### Contents （事件内容）
当满足[Conditions]（触发条件）满足的时候执行的命令列表。更多信息请看接下来的项目："编辑事件指令"。

### 编辑内容
+ 查看执行内容列表
在执行内容中，将游戏中的处理以“[Event Commands] (事件指令)”的方式进行编辑

事件指令会从顶部开始按顺序处理，并且被应用到游戏内容中。已被添加的事件指令会在行的最左端有一个[◆]的标记。以[:]开头的行是它上方的事件指令的内容，或者是处理流程发生分支的位置

+ 添加事件指令
要向列表中注册一个事件指令，只需要双击有[◆]标记的行。在弹出的窗口中，选择要使用的事件指令，然后定义想要的行为和设置即可（除了一小部分）。新双击的位置已经存在事件指令时，新添加的事件指令会插入到双击的位置。

+ 上下文菜单的操作
已经被注册了的事件指令有一个[◆]的标记。在这样的行上面右击会弹出一个菜单，里面有一些常用操作如[Copy]（复制）和[Delete]（删除）。这些项目的功能如下。

    + New（新建）
    在选择的指令的上一行插入一条新的事件指令
    + Edit（编辑）
    编辑选中的事件指令。
    + Cut（剪切）
    把当前的事件指令复制到剪贴板并删除。
    + Copy（复制）
    把当前的事件指令复制到剪贴板。
    + Paste（粘贴）
    把剪贴板中的内容插入到选择的位置。
    + Delete（删除）
    删除所选的事件指令。
    + Select All（全选）
    将列表中的所有事件指令全部选中。
    + Copy as Text （作为文本复制） (August 4th, 2016 Update)
    复制选中的文本到剪切板。
    + Copy as HTML Tags （作为HTML标签复制）(August 4th, 2016 Update)
    复制选中的HTML文本到剪切板
    + Test（测试）
    在游戏中测试所有选中指令
    
+  选择多行指令
单击选中开始的那一行，然后按住[Shift]键单击结束的那一行。
这样在这两行之间的所有带[◆]标记的指令都会被选中。
在选中的事件指令（会变成蓝色）上右键就可以弹出一个上下文菜单，你可以在里面选择一些操作，这些操作会影响所有被选中的指令。

值得注意的是，**如果选择的指令在一个分支中，只有处于同一个分支的指令才能用这种方式选中。**


